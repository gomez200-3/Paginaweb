<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>√Ålbum rom√°ntico</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
</head>
<body class="emerald-bg">
  <div class="container">
    <h1 class="romantic-title">
      <span class="emoji">üì∏</span>
      √Ålbum de Recuerdos
      <span class="emoji">üíò</span>
    </h1>
    <form id="form-foto" style="margin-bottom:1em;">
      <input type="file" id="nueva-foto" accept="image/*" required>
      <input type="text" id="nombre-foto" placeholder="Ponle un nombre especial" required>
      <button class="btn-romantic-round" type="submit">A√±adir foto</button>
    </form>
    <div class="album-lista" id="album-lista"></div>
    <button class="btn-regresar" id="volver-menu-album">(*REGRESAR*)</button>
  </div>
  <!-- Mini reproductor aqu√≠ -->
  <div id="mini-player-modal" style="display:none;">
    <button class="close-player" title="Cerrar">‚úñÔ∏è</button>
    <img id="mini-player-cover" src="media/cover1.jpg" alt="Portada">
    <div class="player-title" id="mini-player-title">Canci√≥n rom√°ntica</div>
    <div class="player-controls">
      <button id="btn-prev" title="Anterior">üöÄ</button>
      <button id="btn-play" title="Play/Pause">üõ∏</button>
      <button id="btn-next" title="Siguiente">ü™ê</button>
    </div>
    <audio id="mini-player-audio"></audio>
  </div>
  <script>
    const precargadas = [
      { nombre: "Foto especial 1", img: "media/foto1.jpg" },
      { nombre: "Foto especial 2", img: "media/foto2.jpg" }
    ];
    function renderAlbum() {
      const userPhotos = JSON.parse(localStorage.getItem('album') || '[]');
      const allPhotos = [...precargadas, ...userPhotos].slice(0, 1000);
      const div = document.getElementById('album-lista');
      div.innerHTML = '';
      if(allPhotos.length === 0) {
        div.innerHTML = '<span class="mensaje-romantico">No has a√±adido fotos a√∫n.</span>';
        return;
      }
      allPhotos.forEach((foto, idx) => {
        const isPrecargada = idx < precargadas.length;
        const item = document.createElement('div');
        item.className = 'album-item';
        item.innerHTML = `
          <img src="${foto.img}" alt="foto" class="foto-album">
          <span class="album-nombre">${foto.nombre}</span>
          ${isPrecargada ? '' : '<button class="btn-borrar" title="Borrar">üóë</button>'}
        `;
        if (!isPrecargada) {
          item.querySelector('.btn-borrar').onclick = function() {
            if(confirm('¬øBorrar esta foto?')) {
              let album = JSON.parse(localStorage.getItem('album') || '[]');
              album.splice(idx - precargadas.length,1);
              localStorage.setItem('album', JSON.stringify(album));
              renderAlbum();
            }
          };
        }
        div.appendChild(item);
      });
    }
    document.getElementById('form-foto').onsubmit = function(e) {
      e.preventDefault();
      const fileInput = document.getElementById('nueva-foto');
      const nombre = document.getElementById('nombre-foto').value.trim();
      if(fileInput.files.length && nombre) {
        let album = JSON.parse(localStorage.getItem('album') || '[]');
        if (album.length + precargadas.length >= 1000) {
          alert('¬°Has alcanzado el l√≠mite de 1000 fotos!');
          return;
        }
        const reader = new FileReader();
        reader.onload = function(evt) {
          album.push({nombre, img: evt.target.result});
          localStorage.setItem('album', JSON.stringify(album));
          renderAlbum();
        };
        reader.readAsDataURL(fileInput.files[0]);
        fileInput.value = '';
        document.getElementById('nombre-foto').value = '';
      }
    };
    document.getElementById('volver-menu-album').onclick = function() { window.location = "aventuras.html"; };
    window.addEventListener('DOMContentLoaded', renderAlbum);
    // Mini reproductor: pega aqu√≠ tu JS global (id√©ntico al de m√∫sica)
  </script>
</body>
</html>
